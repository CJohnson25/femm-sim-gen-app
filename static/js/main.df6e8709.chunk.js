(this["webpackJsonpfemm-sim-gen-app"]=this["webpackJsonpfemm-sim-gen-app"]||[]).push([[0],{70:function(n,e,t){},71:function(n,e,t){},81:function(n,e,t){"use strict";t.r(e);var a=t(0),l=t.n(a),i=t(10),c=t.n(i),o=(t(70),t(45)),r=t(27),d=(t(71),t(72),t(133)),_=t(120),s=t(121),h=t(134),u=t(124),b=t(125),j=t(129),A=t(126),x=t(82),g=t(83),m=t(136),H=t(130),O=t(127),f=t(128),T=t(50),I=t.n(T),G=t(132),N=t(4);function E(n){var e=n.children,t=l.a.useState(!1),a=Object(r.a)(t,2),i=a[0],c=a[1];return Object(N.jsx)(G.a,{open:i,title:"Copied to clipboard!",leaveDelay:1500,onClose:function(){c(!1)},children:e({copy:function(n){I()(n),c(!0)}})})}var C=function(){var n=["N30","N33","N35","N38","N40","N42","N45","N48","N50","N52","N55"],e=["1006 Steel","1010 Steel","1018 Steel","1020 Steel","1117 Steel"],t={UNITS:"millimeters",MAGNET_WIDTH:1,MAGNET_HEIGHT:1,MAGNET_GRADE:"N50",HALBACH:0,HALBACH_WIDTH:1,HALBACH_HEIGHT:1,HALBACH_GRADE:"N50",BACK_IRON:0,BACK_IRON_HEIGHT:1,IRON_MATERIAL:"1006 Steel",POLE_COUNT:5,AIR_GAP:1,MAGNET_GAP:0},a=l.a.useState(t),i=Object(r.a)(a,2),c=i[0],T=i[1],I=l.a.useState(t.HALBACH),G=Object(r.a)(I,2),C=G[0],p=G[1],M=l.a.useState(t.BACK_IRON),B=Object(r.a)(M,2),y=B[0],L=B[1],v=l.a.useState(U(t)),R=Object(r.a)(v,2),w=R[0],D=R[1],P=n.map((function(n,e){return Object(N.jsx)(d.a,{value:n,children:n},e)})),W=e.map((function(n,e){return Object(N.jsx)(d.a,{value:n,children:n},e)})),S=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(_.a,{item:!0,xs:4,children:Object(N.jsx)(s.a,{filled:"true",control:Object(N.jsx)(h.a,{onChange:K,value:c.HALBACH_WIDTH,name:"HALBACH_WIDTH",label:"Halbach Width"})})}),Object(N.jsx)(_.a,{item:!0,xs:4,children:Object(N.jsx)(s.a,{filled:"true",control:Object(N.jsx)(h.a,{onChange:K,value:c.HALBACH_HEIGHT,name:"HALBACH_HEIGHT",label:"Halbach Height"})})}),Object(N.jsx)(_.a,{item:!0,xs:4,children:Object(N.jsxs)(u.a,{fullWidth:!0,children:[Object(N.jsx)(b.a,{children:"Halbach Grade"}),Object(N.jsx)(j.a,{value:c.HALBACH_GRADE,children:P})]})})]}),k=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(_.a,{item:!0,xs:6,children:Object(N.jsx)(s.a,{filled:"true",control:Object(N.jsx)(h.a,{onChange:K,value:c.BACK_IRON_HEIGHT,name:"BACK_IRON_HEIGHT",label:"Back Iron Height"})})}),Object(N.jsx)(_.a,{item:!0,xs:6,children:Object(N.jsxs)(u.a,{fullWidth:!0,children:["Iron Material",Object(N.jsx)(j.a,{onChange:K,name:"IRON_MATERIAL",value:c.IRON_MATERIAL,children:W})]})})]});function K(n){var e=n.target.value;e.match(/^[0-9]+$|^[0-9]+\.[0-9]*$/)&&(c[n.target.name]=e,T(Object(o.a)({},c)),D(U(c)))}function U(n){return JSON.stringify(n,null,2).replace(/^{\n?|\n?}$/g,"").replace(/"(.*)": /g,"$1 = ").replace(/,\n/g,"\n")+'\n\n function init () \n  -- Create Doc\n  showconsole()\n  newdocument(0)\n\n  -- Init Problem\n  mi_probdef(0, UNITS, "planar", 1e-008)\n\n  -- Init Grid\n  mi_showgrid()\n  mi_setgrid(0.001, "cart")\n\n  -- Add materials\n  mi_getmaterial("Air")\n  mi_getmaterial(IRON_MATERIAL)\n  mi_getmaterial(MAGNET_GRADE)\n  if HALBACH == 1 then\n    mi_getmaterial(HALBACH_GRADE)\n  end\n\n  build_objects()\n\n  mi_zoomnatural()\nend\n\nfunction get_v_gap () \n  return get_total_height() * 2\nend\n\nfunction get_h_gap ()\n  return get_total_width() * 1\nend\n\nfunction get_bound_height()\n  return get_v_gap() * 3\nend\n\nfunction get_bound_width() \n  return get_h_gap() * 3\nend\n\nfunction get_pole_width ()\n  local pole_width = MAGNET_WIDTH + MAGNET_GAP\n  if HALBACH == 1 then\n    pole_width = pole_width + HALBACH_WIDTH + MAGNET_GAP\n  end\n\n  return pole_width\nend\n\nfunction get_total_width ()\n  if HALBACH == 1 then\n    return (get_nonhalbach_count() - 1) * (MAGNET_WIDTH + MAGNET_GAP) + get_halbach_count() * (HALBACH_WIDTH + MAGNET_GAP)\n  else\n    return (get_nonhalbach_count() - 1) * (MAGNET_WIDTH + MAGNET_GAP)\n  end\nend\n\nfunction get_total_height ()\n  local total_height = MAGNET_HEIGHT*2 + AIR_GAP\n  if BACK_IRON == 1 then\n    total_height = total_height + BACK_IRON_HEIGHT*2\n  end\n\n  return total_height\nend\n\nfunction get_halbach_count() \n  return POLE_COUNT\nend\n\nfunction get_nonhalbach_count() \n  return POLE_COUNT + 1 \nend\n\nfunction get_total_magnet_count ()\n  if HALBACH == 1 then\n    return get_nonhalbach_count() + get_halbach_count()\n  else \n    return get_nonhalbach_count()\n  end\nend\n\n\nfunction build_objects ()\n  build_air_bounds()\n  -- Build the sides separately\n  build_rotor(0)\n  build_rotor(1)\n  build_analysis_nodes()\nend\n\nfunction build_air_bounds()\n  build_block(0, 0, get_bound_width() , get_bound_height(), "Air", "corner", 0)\nend\n\nfunction build_rotor(side) \n  build_rotor_magnets(side)\n  if BACK_IRON == 1 then\n    local x = get_h_gap()\n    local y = get_v_gap() - BACK_IRON_HEIGHT\n    if side == 1 then \n      y = get_v_gap() + MAGNET_HEIGHT*4\n    end\n    build_rotor_iron(x, y, BACK_IRON_HEIGHT, \'1006 Steel\')\n  end\nend\n\nfunction build_rotor_magnets (side)\n  local count = get_total_magnet_count()\n  \n  local modulus = 2\n  if HALBACH == 1 then \n    modulus = 4\n  end\n  \n  local current_offset = get_h_gap()\n  local y = get_v_gap()\n  if side == 1 then\n    y = get_v_gap() + MAGNET_HEIGHT*3\n  end\n\n  local offset = 90\n  if HALBACH == 1 then\n    offset = 0\n  end\n\n  for i = 0, count - 1 do\n    local direction = (360/modulus) * (mod(i, modulus) + 1) + offset\n    if side == 1 then\n      direction =  (360/modulus) * (modulus - mod(i, modulus) + 1) + offset\n    end\n\n    print(\'direction: \', direction)\n    local is_halbach = 0\n    local is_end = 0\n    local width = MAGNET_WIDTH\n\n    -- If iterating Halbach and If current iteration is halbach magnet\n    if HALBACH == 1 and mod(i, 2) == 1 then\n      is_halbach = 1\n      width = HALBACH_WIDTH\n    end\n\n    -- First or last iteration are half magnets\n    if i == 0 or i == count - 1 then\n      is_end = 1\n      width = width/2\n    end\n\n    build_magnet(current_offset, y, direction, is_halbach, is_end)\n    current_offset = current_offset + width + MAGNET_GAP\n  end\nend\n\nfunction build_magnet (x, y, direction, is_halbach, is_end)\n  local w = MAGNET_WIDTH\n  local h = MAGNET_HEIGHT\n  local grade = MAGNET_GRADE\n\n  if is_halbach == 1 then\n    w = HALBACH_WIDTH\n    h = HALBACH_HEIGHT\n    grade = HALBACH_GRADE\n  end \n\n  if is_end == 1 then\n    w = w/2\n  end\n\n  build_block(x, y, w, h, grade, "center", direction)\nend\n\n\nfunction build_rotor_iron (x, y)\n  build_block(x, y, get_total_width(), BACK_IRON_HEIGHT, IRON_MATERIAL, center, 0)\nend\n\nfunction build_block(x, y, w, h, material, label_position, direction)\n  local x1 = x + w\n  local y1 = y + h\n\n  mi_addnode(x, y)\n  mi_addnode(x1, y)\n  mi_addnode(x, y1)\n  mi_addnode(x1, y1)\n\n  mi_addsegment(x, y, x1, y)\n  mi_addsegment(x1, y, x1, y1)\n  mi_addsegment(x, y1, x1, y1)\n  mi_addsegment(x, y1, x, y)\n\n  local labelX = x + w/2\n  local labelY = y + h/2\n  if (label_position == "corner") then\n    labelX = x + w/8\n    labelY = y + h/8\n  end\n  mi_addblocklabel(labelX, labelY)\n  mi_selectlabel(labelX, labelY)\n  mi_setblockprop(material, 1, 0,"", direction)\n  mi_clearselected()\nend\n\nfunction build_analysis_nodes () \n  local x = get_h_gap()\n  local x1 = x + get_total_width()\n  local y = get_v_gap() + MAGNET_HEIGHT*2\n  \n  mi_addnode(x, y)\n  mi_addnode(x1, y)\nend\n\nfunction analyze_problem ()\n  \nend\n\ninit()\n    '}return Object(N.jsx)("div",{className:"App",children:Object(N.jsxs)(A.a,{maxWidth:"sm",children:[Object(N.jsxs)(_.a,{container:!0,spacing:2,children:[Object(N.jsxs)(_.a,{item:!0,xs:12,children:[Object(N.jsx)("h1",{children:"Air Core Axial Flux PM motor"}),Object(N.jsx)("h2",{children:"FEMM Simulation Generator"})]}),Object(N.jsx)(_.a,{item:!0,xs:12,children:Object(N.jsx)(x.a,{children:"This form will generate a LUA script that can then be run in FEMM to produce a 2D simulation of an air-cored axial flux permanant magnet motor."})})]}),Object(N.jsxs)(_.a,{container:!0,spacing:4,children:[Object(N.jsx)(_.a,{item:!0,xs:12,children:Object(N.jsxs)(u.a,{component:"fieldset",children:[Object(N.jsx)(g.a,{component:"legend",children:"Units"}),Object(N.jsxs)(m.a,{row:!0,"aria-label":"units",onChange:K,name:"UNITS",value:c.UNITS,children:[Object(N.jsx)(s.a,{value:"millimeters",control:Object(N.jsx)(H.a,{}),label:"Millimeters"}),Object(N.jsx)(s.a,{value:"inches",control:Object(N.jsx)(H.a,{}),label:"Inches"})]})]})}),Object(N.jsx)(_.a,{item:!0,xs:4,children:Object(N.jsx)(s.a,{filled:"true",control:Object(N.jsx)(h.a,{onChange:K,value:c.MAGNET_WIDTH,name:"MAGNET_WIDTH",label:"Magnet Width"})})}),Object(N.jsx)(_.a,{item:!0,xs:4,children:Object(N.jsx)(s.a,{filled:"true",control:Object(N.jsx)(h.a,{onChange:K,value:c.MAGNET_HEIGHT,name:"MAGNET_HEIGHT",label:"Magnet Height"})})}),Object(N.jsx)(_.a,{item:!0,xs:4,children:Object(N.jsxs)(u.a,{fullWidth:!0,children:[Object(N.jsx)(b.a,{children:"Magnet Grade"}),Object(N.jsx)(j.a,{onChange:K,name:"MAGNET_GRADE",value:c.MAGNET_GRADE,children:P})]})}),Object(N.jsxs)(_.a,{item:!0,xs:12,children:[Object(N.jsx)(g.a,{component:"legend",children:"Halbach?"}),Object(N.jsx)(s.a,{control:Object(N.jsx)(O.a,{value:c.halbach,onChange:function(n){var e=n.target.checked?1:0;c.HALBACH=e,e||(c.HALBACH_WIDTH=0,c.HALBACH_HEIGHT=0),T(Object(o.a)({},c)),p(e),D(U(c))},name:"HALBACH"}),label:C?"Yes":"No"})]}),C?S:null,Object(N.jsxs)(_.a,{item:!0,xs:12,children:[Object(N.jsx)(g.a,{component:"legend",children:"Back Iron?"}),Object(N.jsx)(s.a,{control:Object(N.jsx)(O.a,{value:c.backIron,onChange:function(n){var e=n.target.checked?1:0;c.BACK_IRON=e,e||(c.BACK_IRON_HEIGHT=0),T(Object(o.a)({},c)),L(e),D(U(c))},name:"BACK_IRON"}),label:y?"Yes":"No"})]}),y?k:null,Object(N.jsx)(_.a,{item:!0,xs:4,children:Object(N.jsx)(s.a,{filled:"true",control:Object(N.jsx)(h.a,{onChange:K,value:c.POLE_COUNT,name:"POLE_COUNT",label:"Pole Count"})})}),Object(N.jsx)(_.a,{item:!0,xs:4,children:Object(N.jsx)(s.a,{filled:"true",control:Object(N.jsx)(h.a,{onChange:K,value:c.AIR_GAP,name:"AIR_GAP",label:"Air Gap"})})}),Object(N.jsx)(_.a,{item:!0,xs:4,children:Object(N.jsx)(s.a,{filled:"true",control:Object(N.jsx)(h.a,{onChange:K,value:c.MAGNET_GAP,name:"MAGNET_GAP",label:"Magnet Spacing"})})})]}),Object(N.jsxs)(_.a,{container:!0,spacing:3,children:[Object(N.jsxs)(_.a,{item:!0,xs:12,children:[Object(N.jsx)("h2",{children:"Output:"}),Object(N.jsx)(x.a,{children:"Copy this LUA script and paste it in the LUA console in your FEMM program."})]}),Object(N.jsx)(_.a,{item:!0,xs:12,children:Object(N.jsx)(h.a,{fullWidth:!0,multiline:!0,rows:20,rowsMax:20,value:w})}),Object(N.jsx)(_.a,{item:!0,xs:12,children:Object(N.jsx)(E,{children:function(n){var e=n.copy;return Object(N.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){return e(w)},children:"Copy"})}})})]})]})})},p=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,137)).then((function(e){var t=e.getCLS,a=e.getFID,l=e.getFCP,i=e.getLCP,c=e.getTTFB;t(n),a(n),l(n),i(n),c(n)}))};c.a.render(Object(N.jsx)(l.a.StrictMode,{children:Object(N.jsx)(C,{})}),document.getElementById("root")),p()}},[[81,1,2]]]);
//# sourceMappingURL=main.df6e8709.chunk.js.map